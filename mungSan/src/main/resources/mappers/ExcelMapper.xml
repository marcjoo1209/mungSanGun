<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ExcelMapper">

    <select id="getListExcelLst" resultType="com.jyj.msg.controller.dto.ExcelLstOutDto">
        select 
			IFNULL(pl.IDX, '') 						as IDX
			, IFNULL(pl.PRODUCTNM, '') 				as PRODUCTNM
			, IFNULL(pl.IMGURL, '') 				as IMGURL
			, IFNULL(pl.LEADAMT, 0) 				as LEADAMT
			, IFNULL(pl.MEMO, '')					as MEMO
			/****************************************/
			, IFNULL(pdl1.PDLIDX			, '')	as pdl1PDLIDX			
			, IFNULL(pdl1.SHOPIDX           , '')   as pdl1SHOPIDX        
			, IFNULL(pdl1.SHOPNM            , '')   as pdl1SHOPNM         
			, IFNULL(pdl1.DTLNOMALAMT       , '')   as pdl1DTLNOMALAMT    
			, IFNULL(pdl1.DTLSHIPAMT        , '')   as pdl1DTLSHIPAMT     
			, IFNULL(pdl1.DTLCOMMITIONAMT   , '')   as pdl1DTLCOMMITIONAMT
			, IFNULL(pdl1.DTLCALCAMT        , '')   as pdl1DTLCALCAMT     
			, IFNULL(pdl1.DTLPAYAMT         , '')   as pdl1DTLPAYAMT      
			, IFNULL(pdl1.DTLINCOMMAMT      , '')   as pdl1DTLINCOMMAMT   
			, IFNULL(pdl1.DTLLOWAMT         , '')   as pdl1DTLLOWAMT      
			, IFNULL(pdl1.DTLPRODUCTLINK    , '')   as pdl1DTLPRODUCTLINK      
			/****************************************/
			, IFNULL(pdl2.PDLIDX			, '')	as pdl2PDLIDX			
			, IFNULL(pdl2.SHOPIDX           , '')   as pdl2SHOPIDX        
			, IFNULL(pdl2.SHOPNM            , '')   as pdl2SHOPNM         
			, IFNULL(pdl2.DTLNOMALAMT       , '')   as pdl2DTLNOMALAMT    
			, IFNULL(pdl2.DTLSHIPAMT        , '')   as pdl2DTLSHIPAMT     
			, IFNULL(pdl2.DTLCOMMITIONAMT   , '')   as pdl2DTLCOMMITIONAMT
			, IFNULL(pdl2.DTLCALCAMT        , '')   as pdl2DTLCALCAMT     
			, IFNULL(pdl2.DTLPAYAMT         , '')   as pdl2DTLPAYAMT      
			, IFNULL(pdl2.DTLINCOMMAMT      , '')   as pdl2DTLINCOMMAMT   
			, IFNULL(pdl2.DTLLOWAMT         , '')   as pdl2DTLLOWAMT        
			, IFNULL(pdl2.DTLPRODUCTLINK    , '')   as pdl2DTLPRODUCTLINK
			/****************************************/
			, IFNULL(pdl3.PDLIDX			, '')	as pdl3PDLIDX			
			, IFNULL(pdl3.SHOPIDX           , '')   as pdl3SHOPIDX        
			, IFNULL(pdl3.SHOPNM            , '')   as pdl3SHOPNM         
			, IFNULL(pdl3.DTLNOMALAMT       , '')   as pdl3DTLNOMALAMT    
			, IFNULL(pdl3.DTLSHIPAMT        , '')   as pdl3DTLSHIPAMT     
			, IFNULL(pdl3.DTLCOMMITIONAMT   , '')   as pdl3DTLCOMMITIONAMT
			, IFNULL(pdl3.DTLCALCAMT        , '')   as pdl3DTLCALCAMT     
			, IFNULL(pdl3.DTLPAYAMT         , '')   as pdl3DTLPAYAMT      
			, IFNULL(pdl3.DTLINCOMMAMT      , '')   as pdl3DTLINCOMMAMT   
			, IFNULL(pdl3.DTLLOWAMT         , '')   as pdl3DTLLOWAMT          
			, IFNULL(pdl3.DTLPRODUCTLINK    , '')   as pdl3DTLPRODUCTLINK
			/****************************************/
			, IFNULL(pdl4.PDLIDX			, '')	as pdl4PDLIDX			
			, IFNULL(pdl4.SHOPIDX           , '')   as pdl4SHOPIDX        
			, IFNULL(pdl4.SHOPNM            , '')   as pdl4SHOPNM         
			, IFNULL(pdl4.DTLNOMALAMT       , '')   as pdl4DTLNOMALAMT    
			, IFNULL(pdl4.DTLSHIPAMT        , '')   as pdl4DTLSHIPAMT     
			, IFNULL(pdl4.DTLCOMMITIONAMT   , '')   as pdl4DTLCOMMITIONAMT
			, IFNULL(pdl4.DTLCALCAMT        , '')   as pdl4DTLCALCAMT     
			, IFNULL(pdl4.DTLPAYAMT         , '')   as pdl4DTLPAYAMT      
			, IFNULL(pdl4.DTLINCOMMAMT      , '')   as pdl4DTLINCOMMAMT   
			, IFNULL(pdl4.DTLLOWAMT         , '')   as pdl4DTLLOWAMT   
			, IFNULL(pdl4.DTLPRODUCTLINK    , '')   as pdl4DTLPRODUCTLINK
			/****************************************/
			, IFNULL(pdl5.PDLIDX			, '')	as pdl5PDLIDX			
			, IFNULL(pdl5.SHOPIDX           , '')   as pdl5SHOPIDX        
			, IFNULL(pdl5.SHOPNM            , '')   as pdl5SHOPNM         
			, IFNULL(pdl5.DTLNOMALAMT       , '')   as pdl5DTLNOMALAMT    
			, IFNULL(pdl5.DTLSHIPAMT        , '')   as pdl5DTLSHIPAMT     
			, IFNULL(pdl5.DTLCOMMITIONAMT   , '')   as pdl5DTLCOMMITIONAMT
			, IFNULL(pdl5.DTLCALCAMT        , '')   as pdl5DTLCALCAMT     
			, IFNULL(pdl5.DTLPAYAMT         , '')   as pdl5DTLPAYAMT      
			, IFNULL(pdl5.DTLINCOMMAMT      , '')   as pdl5DTLINCOMMAMT   
			, IFNULL(pdl5.DTLLOWAMT         , '')   as pdl5DTLLOWAMT  
			, IFNULL(pdl5.DTLPRODUCTLINK    , '')   as pdl5DTLPRODUCTLINK
			/****************************************/
			, IFNULL(pdl6.PDLIDX			, '')	as pdl6PDLIDX			
			, IFNULL(pdl6.SHOPIDX           , '')   as pdl6SHOPIDX        
			, IFNULL(pdl6.SHOPNM            , '')   as pdl6SHOPNM         
			, IFNULL(pdl6.DTLNOMALAMT       , '')   as pdl6DTLNOMALAMT    
			, IFNULL(pdl6.DTLSHIPAMT        , '')   as pdl6DTLSHIPAMT     
			, IFNULL(pdl6.DTLCOMMITIONAMT   , '')   as pdl6DTLCOMMITIONAMT
			, IFNULL(pdl6.DTLCALCAMT        , '')   as pdl6DTLCALCAMT     
			, IFNULL(pdl6.DTLPAYAMT         , '')   as pdl6DTLPAYAMT      
			, IFNULL(pdl6.DTLINCOMMAMT      , '')   as pdl6DTLINCOMMAMT   
			, IFNULL(pdl6.DTLLOWAMT         , '')   as pdl6DTLLOWAMT    
			, IFNULL(pdl6.DTLPRODUCTLINK    , '')   as pdl6DTLPRODUCTLINK
			/****************************************/
			, IFNULL(pdl7.PDLIDX			, '')	as pdl7PDLIDX			
			, IFNULL(pdl7.SHOPIDX           , '')   as pdl7SHOPIDX        
			, IFNULL(pdl7.SHOPNM            , '')   as pdl7SHOPNM         
			, IFNULL(pdl7.DTLNOMALAMT       , '')   as pdl7DTLNOMALAMT    
			, IFNULL(pdl7.DTLSHIPAMT        , '')   as pdl7DTLSHIPAMT     
			, IFNULL(pdl7.DTLCOMMITIONAMT   , '')   as pdl7DTLCOMMITIONAMT
			, IFNULL(pdl7.DTLCALCAMT        , '')   as pdl7DTLCALCAMT     
			, IFNULL(pdl7.DTLPAYAMT         , '')   as pdl7DTLPAYAMT      
			, IFNULL(pdl7.DTLINCOMMAMT      , '')   as pdl7DTLINCOMMAMT   
			, IFNULL(pdl7.DTLLOWAMT         , '')   as pdl7DTLLOWAMT  
			, IFNULL(pdl7.DTLPRODUCTLINK    , '')   as pdl7DTLPRODUCTLINK
			/****************************************/
			, IFNULL(pdl8.PDLIDX			, '')	as pdl8PDLIDX			
			, IFNULL(pdl8.SHOPIDX           , '')  as pdl8SHOPIDX        
			, IFNULL(pdl8.SHOPNM            , '')  as pdl8SHOPNM         
			, IFNULL(pdl8.DTLNOMALAMT       , '')  as pdl8DTLNOMALAMT    
			, IFNULL(pdl8.DTLSHIPAMT        , '')  as pdl8DTLSHIPAMT     
			, IFNULL(pdl8.DTLCOMMITIONAMT   , '')  as pdl8DTLCOMMITIONAMT
			, IFNULL(pdl8.DTLCALCAMT        , '')  as pdl8DTLCALCAMT     
			, IFNULL(pdl8.DTLPAYAMT         , '')  as pdl8DTLPAYAMT      
			, IFNULL(pdl8.DTLINCOMMAMT      , '')  as pdl8DTLINCOMMAMT   
			, IFNULL(pdl8.DTLLOWAMT         , '')  as pdl8DTLLOWAMT  
			, IFNULL(pdl8.DTLPRODUCTLINK    , '')  as pdl8DTLPRODUCTLINK
			 /****************************************/
			, IFNULL(pdl9.PDLIDX			, '')	as pdl9PDLIDX			
			, IFNULL(pdl9.SHOPIDX           , '')   as pdl9SHOPIDX        
			, IFNULL(pdl9.SHOPNM            , '')   as pdl9SHOPNM         
			, IFNULL(pdl9.DTLNOMALAMT       , '')   as pdl9DTLNOMALAMT    
			, IFNULL(pdl9.DTLSHIPAMT        , '')   as pdl9DTLSHIPAMT     
			, IFNULL(pdl9.DTLCOMMITIONAMT   , '')   as pdl9DTLCOMMITIONAMT
			, IFNULL(pdl9.DTLCALCAMT        , '')   as pdl9DTLCALCAMT     
			, IFNULL(pdl9.DTLPAYAMT         , '')   as pdl9DTLPAYAMT      
			, IFNULL(pdl9.DTLINCOMMAMT      , '')   as pdl9DTLINCOMMAMT   
			, IFNULL(pdl9.DTLLOWAMT         , '')   as pdl9DTLLOWAMT 
			, IFNULL(pdl9.DTLPRODUCTLINK    , '')   as pdl9DTLPRODUCTLINK
			/****************************************/
			, IFNULL(pdl10.PDLIDX			, '')	as pdl10PDLIDX			
			, IFNULL(pdl10.SHOPIDX          , '')    as pdl10SHOPIDX        
			, IFNULL(pdl10.SHOPNM           , '')    as pdl10SHOPNM         
			, IFNULL(pdl10.DTLNOMALAMT      , '')    as pdl10DTLNOMALAMT    
			, IFNULL(pdl10.DTLSHIPAMT       , '')    as pdl10DTLSHIPAMT     
			, IFNULL(pdl10.DTLCOMMITIONAMT  , '')    as pdl10DTLCOMMITIONAMT
			, IFNULL(pdl10.DTLCALCAMT       , '')    as pdl10DTLCALCAMT     
			, IFNULL(pdl10.DTLPAYAMT        , '')    as pdl10DTLPAYAMT      
			, IFNULL(pdl10.DTLINCOMMAMT     , '')    as pdl10DTLINCOMMAMT   
			, IFNULL(pdl10.DTLLOWAMT        , '')    as pdl10DTLLOWAMT  
			, IFNULL(pdl10.DTLPRODUCTLINK   , '')    as pdl10DTLPRODUCTLINK
			/****************************************/
			, IFNULL(pdl11.PDLIDX			, '')	as pdl11PDLIDX			
			, IFNULL(pdl11.SHOPIDX          , '')    as pdl11SHOPIDX        
			, IFNULL(pdl11.SHOPNM           , '')    as pdl11SHOPNM         
			, IFNULL(pdl11.DTLNOMALAMT      , '')    as pdl11DTLNOMALAMT    
			, IFNULL(pdl11.DTLSHIPAMT       , '')    as pdl11DTLSHIPAMT     
			, IFNULL(pdl11.DTLCOMMITIONAMT  , '')    as pdl11DTLCOMMITIONAMT
			, IFNULL(pdl11.DTLCALCAMT       , '')    as pdl11DTLCALCAMT     
			, IFNULL(pdl11.DTLPAYAMT        , '')    as pdl11DTLPAYAMT      
			, IFNULL(pdl11.DTLINCOMMAMT     , '')    as pdl11DTLINCOMMAMT   
			, IFNULL(pdl11.DTLLOWAMT        , '')    as pdl11DTLLOWAMT  
			, IFNULL(pdl11.DTLPRODUCTLINK   , '')    as pdl11DTLPRODUCTLINK
			/****************************************/
		from product_lst pl 
		left outer join
			(
			select
				pdl.IDX 							as PDLIDX
				, pdl.PRODUCTIDX					as PRODUCTIDX
				, pdl.SHOPIDX 						as SHOPIDX
				, sl.SHOPNM 						as SHOPNM
				, pdl.DTLNOMALAMT 					as DTLNOMALAMT
				, pdl.DTLSHIPAMT 					as DTLSHIPAMT 
				, pdl.DTLCOMMITIONAMT 				as DTLCOMMITIONAMT 
				, pdl.DTLCALCAMT 					as DTLCALCAMT 
				, pdl.DTLPAYAMT 					as DTLPAYAMT 
				, pdl.DTLINCOMMAMT 					as DTLINCOMMAMT 
				, pdl.DTLLOWAMT 					as DTLLOWAMT 
				, pdl.DTLPRODUCTLINK 
			from product_dtl_lst pdl 
			inner join shop_lst sl 
			on sl.IDX = '1'
			 and sl.IDX = pdl.SHOPIDX 
			where pdl.USEYN = 'Y'
			) as pdl1
		on pl.IDX = pdl1.PRODUCTIDX
			/****************************************/
		left outer join
			(
			select
				pdl.IDX 							as PDLIDX
				, pdl.PRODUCTIDX					as PRODUCTIDX
				, pdl.SHOPIDX 						as SHOPIDX
				, sl.SHOPNM 						as SHOPNM
				, pdl.DTLNOMALAMT 					as DTLNOMALAMT
				, pdl.DTLSHIPAMT 					as DTLSHIPAMT 
				, pdl.DTLCOMMITIONAMT 				as DTLCOMMITIONAMT 
				, pdl.DTLCALCAMT 					as DTLCALCAMT 
				, pdl.DTLPAYAMT 					as DTLPAYAMT 
				, pdl.DTLINCOMMAMT 					as DTLINCOMMAMT 
				, pdl.DTLLOWAMT 					as DTLLOWAMT 
				, pdl.DTLPRODUCTLINK 
			from product_dtl_lst pdl 
			inner join shop_lst sl 
			on sl.IDX = '2'
			 and sl.IDX = pdl.SHOPIDX 
			where pdl.USEYN = 'Y'
			) as pdl2
		on pl.IDX = pdl2.PRODUCTIDX
			/****************************************/
		left outer join
			(
			select
				pdl.IDX 							as PDLIDX
				, pdl.PRODUCTIDX					as PRODUCTIDX
				, pdl.SHOPIDX 						as SHOPIDX
				, sl.SHOPNM 						as SHOPNM
				, pdl.DTLNOMALAMT 					as DTLNOMALAMT
				, pdl.DTLSHIPAMT 					as DTLSHIPAMT 
				, pdl.DTLCOMMITIONAMT 				as DTLCOMMITIONAMT 
				, pdl.DTLCALCAMT 					as DTLCALCAMT 
				, pdl.DTLPAYAMT 					as DTLPAYAMT 
				, pdl.DTLINCOMMAMT 					as DTLINCOMMAMT 
				, pdl.DTLLOWAMT 					as DTLLOWAMT 
				, pdl.DTLPRODUCTLINK 
			from product_dtl_lst pdl 
			inner join shop_lst sl 
			on sl.IDX = '3'
			 and sl.IDX = pdl.SHOPIDX 
			where pdl.USEYN = 'Y'
			) as pdl3
		on pl.IDX = pdl3.PRODUCTIDX
		/****************************************/
		left outer join
			(
			select
				pdl.IDX 							as PDLIDX
				, pdl.PRODUCTIDX					as PRODUCTIDX
				, pdl.SHOPIDX 						as SHOPIDX
				, sl.SHOPNM 						as SHOPNM
				, pdl.DTLNOMALAMT 					as DTLNOMALAMT
				, pdl.DTLSHIPAMT 					as DTLSHIPAMT 
				, pdl.DTLCOMMITIONAMT 				as DTLCOMMITIONAMT 
				, pdl.DTLCALCAMT 					as DTLCALCAMT 
				, pdl.DTLPAYAMT 					as DTLPAYAMT 
				, pdl.DTLINCOMMAMT 					as DTLINCOMMAMT 
				, pdl.DTLLOWAMT 					as DTLLOWAMT 
				, pdl.DTLPRODUCTLINK 
			from product_dtl_lst pdl 
			inner join shop_lst sl 
			on sl.IDX = '4'
			 and sl.IDX = pdl.SHOPIDX 
			where pdl.USEYN = 'Y'
			) as pdl4
		on pl.IDX = pdl4.PRODUCTIDX
		/****************************************/
		left outer join
			(
			select
				pdl.IDX 							as PDLIDX
				, pdl.PRODUCTIDX					as PRODUCTIDX
				, pdl.SHOPIDX 						as SHOPIDX
				, sl.SHOPNM 						as SHOPNM
				, pdl.DTLNOMALAMT 					as DTLNOMALAMT
				, pdl.DTLSHIPAMT 					as DTLSHIPAMT 
				, pdl.DTLCOMMITIONAMT 				as DTLCOMMITIONAMT 
				, pdl.DTLCALCAMT 					as DTLCALCAMT 
				, pdl.DTLPAYAMT 					as DTLPAYAMT 
				, pdl.DTLINCOMMAMT 					as DTLINCOMMAMT 
				, pdl.DTLLOWAMT 					as DTLLOWAMT 
				, pdl.DTLPRODUCTLINK 
			from product_dtl_lst pdl 
			inner join shop_lst sl 
			on sl.IDX = '5'
			 and sl.IDX = pdl.SHOPIDX 
			where pdl.USEYN = 'Y'
			) as pdl5
		on pl.IDX = pdl5.PRODUCTIDX
		/****************************************/
		left outer join
			(
			select
				pdl.IDX 							as PDLIDX
				, pdl.PRODUCTIDX					as PRODUCTIDX
				, pdl.SHOPIDX 						as SHOPIDX
				, sl.SHOPNM 						as SHOPNM
				, pdl.DTLNOMALAMT 					as DTLNOMALAMT
				, pdl.DTLSHIPAMT 					as DTLSHIPAMT 
				, pdl.DTLCOMMITIONAMT 				as DTLCOMMITIONAMT 
				, pdl.DTLCALCAMT 					as DTLCALCAMT 
				, pdl.DTLPAYAMT 					as DTLPAYAMT 
				, pdl.DTLINCOMMAMT 					as DTLINCOMMAMT 
				, pdl.DTLLOWAMT 					as DTLLOWAMT 
				, pdl.DTLPRODUCTLINK 
			from product_dtl_lst pdl 
			inner join shop_lst sl 
			on sl.IDX = '6'
			 and sl.IDX = pdl.SHOPIDX 
			where pdl.USEYN = 'Y'
			) as pdl6
		on pl.IDX = pdl6.PRODUCTIDX
		/****************************************/
		left outer join
			(
			select
				pdl.IDX 							as PDLIDX
				, pdl.PRODUCTIDX					as PRODUCTIDX
				, pdl.SHOPIDX 						as SHOPIDX
				, sl.SHOPNM 						as SHOPNM
				, pdl.DTLNOMALAMT 					as DTLNOMALAMT
				, pdl.DTLSHIPAMT 					as DTLSHIPAMT 
				, pdl.DTLCOMMITIONAMT 				as DTLCOMMITIONAMT 
				, pdl.DTLCALCAMT 					as DTLCALCAMT 
				, pdl.DTLPAYAMT 					as DTLPAYAMT 
				, pdl.DTLINCOMMAMT 					as DTLINCOMMAMT 
				, pdl.DTLLOWAMT 					as DTLLOWAMT 
				, pdl.DTLPRODUCTLINK 
			from product_dtl_lst pdl 
			inner join shop_lst sl 
			on sl.IDX = '7'
			 and sl.IDX = pdl.SHOPIDX 
			where pdl.USEYN = 'Y'
			) as pdl7
		on pl.IDX = pdl7.PRODUCTIDX
		/****************************************/
		left outer join
			(
			select
				pdl.IDX 							as PDLIDX
				, pdl.PRODUCTIDX					as PRODUCTIDX
				, pdl.SHOPIDX 						as SHOPIDX
				, sl.SHOPNM 						as SHOPNM
				, pdl.DTLNOMALAMT 					as DTLNOMALAMT
				, pdl.DTLSHIPAMT 					as DTLSHIPAMT 
				, pdl.DTLCOMMITIONAMT 				as DTLCOMMITIONAMT 
				, pdl.DTLCALCAMT 					as DTLCALCAMT 
				, pdl.DTLPAYAMT 					as DTLPAYAMT 
				, pdl.DTLINCOMMAMT 					as DTLINCOMMAMT 
				, pdl.DTLLOWAMT 					as DTLLOWAMT 
				, pdl.DTLPRODUCTLINK 
			from product_dtl_lst pdl 
			inner join shop_lst sl 
			on sl.IDX = '8'
			 and sl.IDX = pdl.SHOPIDX 
			where pdl.USEYN = 'Y'
			) as pdl8
		on pl.IDX = pdl8.PRODUCTIDX
		/****************************************/
		left outer join
			(
			select
				pdl.IDX 							as PDLIDX
				, pdl.PRODUCTIDX					as PRODUCTIDX
				, pdl.SHOPIDX 						as SHOPIDX
				, sl.SHOPNM 						as SHOPNM
				, pdl.DTLNOMALAMT 					as DTLNOMALAMT
				, pdl.DTLSHIPAMT 					as DTLSHIPAMT 
				, pdl.DTLCOMMITIONAMT 				as DTLCOMMITIONAMT 
				, pdl.DTLCALCAMT 					as DTLCALCAMT 
				, pdl.DTLPAYAMT 					as DTLPAYAMT 
				, pdl.DTLINCOMMAMT 					as DTLINCOMMAMT 
				, pdl.DTLLOWAMT 					as DTLLOWAMT 
				, pdl.DTLPRODUCTLINK 
			from product_dtl_lst pdl 
			inner join shop_lst sl 
			on sl.IDX = '9'
			 and sl.IDX = pdl.SHOPIDX 
			where pdl.USEYN = 'Y'
			) as pdl9
		on pl.IDX = pdl9.PRODUCTIDX
		/****************************************/
		left outer join
			(
			select
				pdl.IDX 							as PDLIDX
				, pdl.PRODUCTIDX					as PRODUCTIDX
				, pdl.SHOPIDX 						as SHOPIDX
				, sl.SHOPNM 						as SHOPNM
				, pdl.DTLNOMALAMT 					as DTLNOMALAMT
				, pdl.DTLSHIPAMT 					as DTLSHIPAMT 
				, pdl.DTLCOMMITIONAMT 				as DTLCOMMITIONAMT 
				, pdl.DTLCALCAMT 					as DTLCALCAMT 
				, pdl.DTLPAYAMT 					as DTLPAYAMT 
				, pdl.DTLINCOMMAMT 					as DTLINCOMMAMT 
				, pdl.DTLLOWAMT 					as DTLLOWAMT 
				, pdl.DTLPRODUCTLINK 
			from product_dtl_lst pdl 
			inner join shop_lst sl 
			on sl.IDX = '10'
			 and sl.IDX = pdl.SHOPIDX 
			where pdl.USEYN = 'Y'
			) as pdl10
		on pl.IDX = pdl10.PRODUCTIDX
		/****************************************/
		left outer join
			(
			select
				pdl.IDX 							as PDLIDX
				, pdl.PRODUCTIDX					as PRODUCTIDX
				, pdl.SHOPIDX 						as SHOPIDX
				, sl.SHOPNM 						as SHOPNM
				, pdl.DTLNOMALAMT 					as DTLNOMALAMT
				, pdl.DTLSHIPAMT 					as DTLSHIPAMT 
				, pdl.DTLCOMMITIONAMT 				as DTLCOMMITIONAMT 
				, pdl.DTLCALCAMT 					as DTLCALCAMT 
				, pdl.DTLPAYAMT 					as DTLPAYAMT 
				, pdl.DTLINCOMMAMT 					as DTLINCOMMAMT 
				, pdl.DTLLOWAMT 					as DTLLOWAMT 
				, pdl.DTLPRODUCTLINK 
			from product_dtl_lst pdl 
			inner join shop_lst sl 
			on sl.IDX = '11'
			 and sl.IDX = pdl.SHOPIDX 
			where pdl.USEYN = 'Y'
			) as pdl11
		on pl.IDX = pdl11.PRODUCTIDX
		/****************************************/
		where pl.USEYN = 'Y'
	</select>
	
	<insert id='createListExcelListTbl'>
        INSERT INTO product_lst
        (
        	IDX,
			PRODUCTNM,
			IMGURL,
			NOMALAMT,
			SHIPAMT,
			COMMITIONAMT,
			CALCAMT,
			PAYAMT,
			INCOMEAMT,
			LOWAMT,
			PRODUCTLINK,
			USEYN,
			CREATEDTM,
			AUDITDTM,
			AUDITID,
			MEMO,
			LEADAMT
        )
        VALUES
        (
        	IFNULL(#{IDX},
	        	(IFNULL(
	            	(SELECT 
	            		MAX(CAST(cl.IDX AS INTEGER))
	        		  FROM product_lst cl
	        		 WHERE 1 = 1
	        		) , 0
	        	) +1)
        	)
        	, #{PRODUCTNM}
        	, #{IMGURL}
        	, IFNULL(#{NOMALAMT}, '0')
        	, IFNULL(#{SHIPAMT}, '0')
        	, IFNULL(#{COMMITIONAMT}, '0')
        	, IFNULL(#{CALCAMT}, '0')
        	, IFNULL(#{PAYAMT}, '0')
        	, IFNULL(#{INCOMEAMT}, '0')
        	, IFNULL(#{LOWAMT}, '0')
        	, #{PRODUCTLINK}
        	, 'Y'
        	, CURRENT_TIMESTAMP(6)
        	, CURRENT_TIMESTAMP(6)
        	, #{AUDITID}
        	, #{MEMO}
        	, #{LEADAMT}
        )
        ON DUPLICATE KEY UPDATE
			PRODUCTNM 		= #{PRODUCTNM},
			IMGURL 			= #{IMGURL},
			NOMALAMT 		= #{NOMALAMT},
			SHIPAMT 		= #{SHIPAMT},
			COMMITIONAMT 	= #{COMMITIONAMT},
			CALCAMT 		= #{CALCAMT},
			PAYAMT 			= #{PAYAMT},
			INCOMEAMT 		= #{INCOMEAMT},
			LOWAMT 			= #{LOWAMT},
			PRODUCTLINK 	= #{PRODUCTLINK},
			AUDITDTM 		= CURRENT_TIMESTAMP(6),
			AUDITID 		= 'cila10',
        	MEMO			= #{MEMO},
        	LEADAMT			= #{LEADAMT},
        	USEYN			= 'Y'
	</insert>
	
	<insert id='createListExcelDtlListTbl'>
        INSERT INTO product_dtl_lst
        (
        	IDX
        	, SHOPIDX
        	, PRODUCTIDX
        	, DTLNOMALAMT
        	, DTLSHIPAMT
        	, DTLCOMMITIONAMT
        	, DTLCALCAMT
        	, DTLPAYAMT
        	, DTLINCOMMAMT
        	, DTLLOWAMT
        	, DTLPRODUCTLINK
        	, USEYN
        	, CREATEDTM
        	, AUDITID
        	, AUDITDTM
        )
        VALUES
        (
        	IFNULL(#{IDX},
	        	(IFNULL(
	            	(SELECT 
	            		MAX(CAST(cl.IDX AS INTEGER))
	        		  FROM product_dtl_lst cl
	        		 WHERE 1 = 1
	        		) , 0
	        	) +1)
	        )
        	, #{SHOPIDX}
        	, #{PRODUCTIDX}
        	, IFNULL(#{DTLNOMALAMT},'0')
        	, IFNULL(#{DTLSHIPAMT},'0')
        	, IFNULL(#{DTLCOMMITIONAMT},'0')
        	, IFNULL(#{DTLCALCAMT},'0')
        	, IFNULL(#{DTLPAYAMT},'0')
        	, IFNULL(#{DTLINCOMMAMT},'0')
        	, IFNULL(#{DTLLOWAMT},'0')
        	, #{DTLPRODUCTLINK}
        	, 'Y'
        	, CURRENT_TIMESTAMP(6)
        	, #{AUDITID}
        	, CURRENT_TIMESTAMP(6)
        )
        ON DUPLICATE KEY UPDATE
        	DTLNOMALAMT			= IFNULL(#{DTLNOMALAMT},'0')
        	, DTLSHIPAMT		= IFNULL(#{DTLSHIPAMT},'0')
        	, DTLCOMMITIONAMT	= IFNULL(#{DTLCOMMITIONAMT},'0')
        	, DTLCALCAMT		= IFNULL(#{DTLCALCAMT},'0')
        	, DTLPAYAMT			= IFNULL(#{DTLPAYAMT},'0')
        	, DTLINCOMMAMT		= IFNULL(#{DTLINCOMMAMT},'0')
        	, DTLLOWAMT			= IFNULL(#{DTLLOWAMT},'0')
        	, DTLPRODUCTLINK	= #{DTLPRODUCTLINK}
        	, SHOPIDX			= #{SHOPIDX}
        	, AUDITID			= #{AUDITID}
        	, AUDITDTM			= CURRENT_TIMESTAMP(6)
        	, USEYN			= 'Y'
	</insert>
	
	<select id="getCountProductLst" resultType="com.jyj.msg.controller.dto.ProductExcelLstDto">
SELECT
	PIDX
	, PRODUCTNM
	, MAX(CASE WHEN SHOPIDX = '1' THEN PDIDX END) 			AS 'PDIDX1'
	, MAX(CASE WHEN SHOPIDX = '1' THEN SHOPIDX END) 		AS 'SHOP1'	
	, MAX(CASE WHEN SHOPIDX = '1' THEN SHOPNM END) 			AS 'SHOP1NM'
	, MAX(CASE WHEN SHOPIDX = '1' THEN DTLPAYAMT END) 		AS 'SHOP1PRICE'	
	, MAX(CASE WHEN SHOPIDX = '1' THEN DTLPRODUCTLINK END) 	AS 'SHOP1LINK'		
	, MAX(CASE WHEN SHOPIDX = '2' THEN PDIDX END)			AS 'PDIDX2'
	, MAX(CASE WHEN SHOPIDX = '2' THEN SHOPIDX END)		AS 'SHOP2'	
	, MAX(CASE WHEN SHOPIDX = '2' THEN SHOPNM END)			AS 'SHOP2NM'
	, MAX(CASE WHEN SHOPIDX = '2' THEN DTLPAYAMT END)		AS 'SHOP2PRICE'	
	, MAX(CASE WHEN SHOPIDX = '2' THEN DTLPRODUCTLINK END)	AS 'SHOP2LINK'		
	, MAX(CASE WHEN SHOPIDX = '3' THEN PDIDX END)			AS 'PDIDX3'
	, MAX(CASE WHEN SHOPIDX = '3' THEN SHOPIDX END)		AS 'SHOP3'	
	, MAX(CASE WHEN SHOPIDX = '3' THEN SHOPNM END)			AS 'SHOP3NM'
	, MAX(CASE WHEN SHOPIDX = '3' THEN DTLPAYAMT END)		AS 'SHOP3PRICE'	
	, MAX(CASE WHEN SHOPIDX = '3' THEN DTLPRODUCTLINK END)	AS 'SHOP3LINK'		
	, MAX(CASE WHEN SHOPIDX = '4' THEN PDIDX END)			AS 'PDIDX4'
	, MAX(CASE WHEN SHOPIDX = '4' THEN SHOPIDX END)		AS 'SHOP4'	
	, MAX(CASE WHEN SHOPIDX = '4' THEN SHOPNM END)			AS 'SHOP4NM'
	, MAX(CASE WHEN SHOPIDX = '4' THEN DTLPAYAMT END)		AS 'SHOP4PRICE'	
	, MAX(CASE WHEN SHOPIDX = '4' THEN DTLPRODUCTLINK END)	AS 'SHOP4LINK'		
	, MAX(CASE WHEN SHOPIDX = '5' THEN PDIDX END)			AS 'PDIDX5'
	, MAX(CASE WHEN SHOPIDX = '5' THEN SHOPIDX END)		AS 'SHOP5'	
	, MAX(CASE WHEN SHOPIDX = '5' THEN SHOPNM END)			AS 'SHOP5NM'
	, MAX(CASE WHEN SHOPIDX = '5' THEN DTLPAYAMT END)		AS 'SHOP5PRICE'	
	, MAX(CASE WHEN SHOPIDX = '5' THEN DTLPRODUCTLINK END)	AS 'SHOP5LINK'		
	, MAX(CASE WHEN SHOPIDX = '6' THEN PDIDX END)			AS 'PDIDX6'
	, MAX(CASE WHEN SHOPIDX = '6' THEN SHOPIDX END)		AS 'SHOP6'	
	, MAX(CASE WHEN SHOPIDX = '6' THEN SHOPNM END)			AS 'SHOP6NM'
	, MAX(CASE WHEN SHOPIDX = '6' THEN DTLPAYAMT END)		AS 'SHOP6PRICE'	
	, MAX(CASE WHEN SHOPIDX = '6' THEN DTLPRODUCTLINK END)	AS 'SHOP6LINK'		
	, MAX(CASE WHEN SHOPIDX = '7' THEN PDIDX END)			AS 'PDIDX7'
	, MAX(CASE WHEN SHOPIDX = '7' THEN SHOPIDX END)		AS 'SHOP7'	
	, MAX(CASE WHEN SHOPIDX = '7' THEN SHOPNM END)			AS 'SHOP7NM'
	, MAX(CASE WHEN SHOPIDX = '7' THEN DTLPAYAMT END)		AS 'SHOP7PRICE'	
	, MAX(CASE WHEN SHOPIDX = '7' THEN DTLPRODUCTLINK END)	AS 'SHOP7LINK'		
	, MAX(CASE WHEN SHOPIDX = '8' THEN PDIDX END)			AS 'PDIDX8'
	, MAX(CASE WHEN SHOPIDX = '8' THEN SHOPIDX END)		AS 'SHOP8'	
	, MAX(CASE WHEN SHOPIDX = '8' THEN SHOPNM END)			AS 'SHOP8NM'
	, MAX(CASE WHEN SHOPIDX = '8' THEN DTLPAYAMT END)		AS 'SHOP8PRICE'	
	, MAX(CASE WHEN SHOPIDX = '8' THEN DTLPRODUCTLINK END)	AS 'SHOP8LINK'		
	, MAX(CASE WHEN SHOPIDX = '9' THEN PDIDX END)			AS 'PDIDX9'
	, MAX(CASE WHEN SHOPIDX = '9' THEN SHOPIDX END)		AS 'SHOP9'	
	, MAX(CASE WHEN SHOPIDX = '9' THEN SHOPNM END)			AS 'SHOP9NM'
	, MAX(CASE WHEN SHOPIDX = '9' THEN DTLPAYAMT END)		AS 'SHOP9PRICE'	
	, MAX(CASE WHEN SHOPIDX = '9' THEN DTLPRODUCTLINK END)	AS 'SHOP9LINK'		
	, MAX(CASE WHEN SHOPIDX = '10' THEN PDIDX END)			AS 'PDIDX10'
	, MAX(CASE WHEN SHOPIDX = '10' THEN SHOPIDX END)		AS 'SHOP10'	
	, MAX(CASE WHEN SHOPIDX = '10' THEN SHOPNM END)			AS 'SHOP10NM'
	, MAX(CASE WHEN SHOPIDX = '10' THEN DTLPAYAMT END)		AS 'SHOP10PRICE'	
	, MAX(CASE WHEN SHOPIDX = '10' THEN DTLPRODUCTLINK END)	AS 'SHOP10LINK'		
	, MAX(CASE WHEN SHOPIDX = '11' THEN PDIDX END)			AS 'PDIDX11'
	, MAX(CASE WHEN SHOPIDX = '11' THEN SHOPIDX END)		AS 'SHOP11'	
	, MAX(CASE WHEN SHOPIDX = '11' THEN SHOPNM END)			AS 'SHOP11NM'
	, MAX(CASE WHEN SHOPIDX = '11' THEN DTLPAYAMT END)		AS 'SHOP11PRICE'	
	, MAX(CASE WHEN SHOPIDX = '11' THEN DTLPRODUCTLINK END)	AS 'SHOP11LINK'		
	, MAX(CASE WHEN SHOPIDX = '12' THEN PDIDX END)			AS 'PDIDX12'
	, MAX(CASE WHEN SHOPIDX = '12' THEN SHOPIDX END)		AS 'SHOP12'	
	, MAX(CASE WHEN SHOPIDX = '12' THEN SHOPNM END)			AS 'SHOP12NM'
	, MAX(CASE WHEN SHOPIDX = '12' THEN DTLPAYAMT END)		AS 'SHOP12PRICE'	
	, MAX(CASE WHEN SHOPIDX = '12' THEN DTLPRODUCTLINK END)	AS 'SHOP12LINK'		
	, MAX(CASE WHEN SHOPIDX = '13' THEN PDIDX END)			AS 'PDIDX13'
	, MAX(CASE WHEN SHOPIDX = '13' THEN SHOPIDX END)		AS 'SHOP13'	
	, MAX(CASE WHEN SHOPIDX = '13' THEN SHOPNM END)			AS 'SHOP13NM'
	, MAX(CASE WHEN SHOPIDX = '13' THEN DTLPAYAMT END)		AS 'SHOP13PRICE'	
	, MAX(CASE WHEN SHOPIDX = '13' THEN DTLPRODUCTLINK END)	AS 'SHOP13LINK'		
	, MAX(CASE WHEN SHOPIDX = '14' THEN PDIDX END)			AS 'PDIDX14'
	, MAX(CASE WHEN SHOPIDX = '14' THEN SHOPIDX END)		AS 'SHOP14'	
	, MAX(CASE WHEN SHOPIDX = '14' THEN SHOPNM END)			AS 'SHOP14NM'
	, MAX(CASE WHEN SHOPIDX = '14' THEN DTLPAYAMT END)		AS 'SHOP14PRICE'	
	, MAX(CASE WHEN SHOPIDX = '14' THEN DTLPRODUCTLINK END)	AS 'SHOP14LINK'		
	, MAX(CASE WHEN SHOPIDX = '15' THEN PDIDX END)			AS 'PDIDX15'
	, MAX(CASE WHEN SHOPIDX = '15' THEN SHOPIDX END)		AS 'SHOP15'	
	, MAX(CASE WHEN SHOPIDX = '15' THEN SHOPNM END)			AS 'SHOP15NM'
	, MAX(CASE WHEN SHOPIDX = '15' THEN DTLPAYAMT END)		AS 'SHOP15PRICE'	
	, MAX(CASE WHEN SHOPIDX = '15' THEN DTLPRODUCTLINK END)	AS 'SHOP15LINK'		
	, MAX(CASE WHEN SHOPIDX = '16' THEN PDIDX END)			AS 'PDIDX16'
	, MAX(CASE WHEN SHOPIDX = '16' THEN SHOPIDX END)		AS 'SHOP16'	
	, MAX(CASE WHEN SHOPIDX = '16' THEN SHOPNM END)			AS 'SHOP16NM'
	, MAX(CASE WHEN SHOPIDX = '16' THEN DTLPAYAMT END)		AS 'SHOP16PRICE'	
	, MAX(CASE WHEN SHOPIDX = '16' THEN DTLPRODUCTLINK END)	AS 'SHOP16LINK'		
	, MAX(CASE WHEN SHOPIDX = '17' THEN PDIDX END)			AS 'PDIDX17'
	, MAX(CASE WHEN SHOPIDX = '17' THEN SHOPIDX END)		AS 'SHOP17'	
	, MAX(CASE WHEN SHOPIDX = '17' THEN SHOPNM END)			AS 'SHOP17NM'
	, MAX(CASE WHEN SHOPIDX = '17' THEN DTLPAYAMT END)		AS 'SHOP17PRICE'	
	, MAX(CASE WHEN SHOPIDX = '17' THEN DTLPRODUCTLINK END)	AS 'SHOP17LINK'		
	, MAX(CASE WHEN SHOPIDX = '18' THEN PDIDX END)			AS 'PDIDX18'
	, MAX(CASE WHEN SHOPIDX = '18' THEN SHOPIDX END)		AS 'SHOP18'	
	, MAX(CASE WHEN SHOPIDX = '18' THEN SHOPNM END)			AS 'SHOP18NM'
	, MAX(CASE WHEN SHOPIDX = '18' THEN DTLPAYAMT END)		AS 'SHOP18PRICE'	
	, MAX(CASE WHEN SHOPIDX = '18' THEN DTLPRODUCTLINK END)	AS 'SHOP18LINK'		
	, MAX(CASE WHEN SHOPIDX = '19' THEN PDIDX END)			AS 'PDIDX19'
	, MAX(CASE WHEN SHOPIDX = '19' THEN SHOPIDX END)		AS 'SHOP19'	
	, MAX(CASE WHEN SHOPIDX = '19' THEN SHOPNM END)			AS 'SHOP19NM'
	, MAX(CASE WHEN SHOPIDX = '19' THEN DTLPAYAMT END)		AS 'SHOP19PRICE'	
	, MAX(CASE WHEN SHOPIDX = '19' THEN DTLPRODUCTLINK END)	AS 'SHOP19LINK'		
	, MAX(CASE WHEN SHOPIDX = '20' THEN PDIDX END)			AS 'PDIDX20'
	, MAX(CASE WHEN SHOPIDX = '20' THEN SHOPIDX END)		AS 'SHOP20'	
	, MAX(CASE WHEN SHOPIDX = '20' THEN SHOPNM END)			AS 'SHOP20NM'
	, MAX(CASE WHEN SHOPIDX = '20' THEN DTLPAYAMT END)		AS 'SHOP20PRICE'	
	, MAX(CASE WHEN SHOPIDX = '20' THEN DTLPRODUCTLINK END)	AS 'SHOP20LINK'		
	, MAX(CASE WHEN SHOPIDX = '21' THEN PDIDX END)			AS 'PDIDX21'
	, MAX(CASE WHEN SHOPIDX = '21' THEN SHOPIDX END)		AS 'SHOP21'	
	, MAX(CASE WHEN SHOPIDX = '21' THEN SHOPNM END)			AS 'SHOP21NM'
	, MAX(CASE WHEN SHOPIDX = '21' THEN DTLPAYAMT END)		AS 'SHOP21PRICE'	
	, MAX(CASE WHEN SHOPIDX = '21' THEN DTLPRODUCTLINK END)	AS 'SHOP21LINK'		
	, MAX(CASE WHEN SHOPIDX = '22' THEN PDIDX END)			AS 'PDIDX22'
	, MAX(CASE WHEN SHOPIDX = '22' THEN SHOPIDX END)		AS 'SHOP22'	
	, MAX(CASE WHEN SHOPIDX = '22' THEN SHOPNM END)			AS 'SHOP22NM'
	, MAX(CASE WHEN SHOPIDX = '22' THEN DTLPAYAMT END)		AS 'SHOP22PRICE'	
	, MAX(CASE WHEN SHOPIDX = '22' THEN DTLPRODUCTLINK END)	AS 'SHOP22LINK'		
	, MAX(CASE WHEN SHOPIDX = '23' THEN PDIDX END)			AS 'PDIDX23'
	, MAX(CASE WHEN SHOPIDX = '23' THEN SHOPIDX END)		AS 'SHOP23'	
	, MAX(CASE WHEN SHOPIDX = '23' THEN SHOPNM END)			AS 'SHOP23NM'
	, MAX(CASE WHEN SHOPIDX = '23' THEN DTLPAYAMT END)		AS 'SHOP23PRICE'	
	, MAX(CASE WHEN SHOPIDX = '23' THEN DTLPRODUCTLINK END)	AS 'SHOP23LINK'		
	, MAX(CASE WHEN SHOPIDX = '24' THEN PDIDX END)			AS 'PDIDX24'
	, MAX(CASE WHEN SHOPIDX = '24' THEN SHOPIDX END)		AS 'SHOP24'	
	, MAX(CASE WHEN SHOPIDX = '24' THEN SHOPNM END)			AS 'SHOP24NM'
	, MAX(CASE WHEN SHOPIDX = '24' THEN DTLPAYAMT END)		AS 'SHOP24PRICE'	
	, MAX(CASE WHEN SHOPIDX = '24' THEN DTLPRODUCTLINK END)	AS 'SHOP24LINK'		
	, MAX(CASE WHEN SHOPIDX = '25' THEN PDIDX END)			AS 'PDIDX25'
	, MAX(CASE WHEN SHOPIDX = '25' THEN SHOPIDX END)		AS 'SHOP25'	
	, MAX(CASE WHEN SHOPIDX = '25' THEN SHOPNM END)			AS 'SHOP25NM'
	, MAX(CASE WHEN SHOPIDX = '25' THEN DTLPAYAMT END)		AS 'SHOP25PRICE'	
	, MAX(CASE WHEN SHOPIDX = '25' THEN DTLPRODUCTLINK END)	AS 'SHOP25LINK'		
	, MAX(CASE WHEN SHOPIDX = '26' THEN PDIDX END)			AS 'PDIDX26'
	, MAX(CASE WHEN SHOPIDX = '26' THEN SHOPIDX END)		AS 'SHOP26'	
	, MAX(CASE WHEN SHOPIDX = '26' THEN SHOPNM END)			AS 'SHOP26NM'
	, MAX(CASE WHEN SHOPIDX = '26' THEN DTLPAYAMT END)		AS 'SHOP26PRICE'	
	, MAX(CASE WHEN SHOPIDX = '26' THEN DTLPRODUCTLINK END)	AS 'SHOP26LINK'		
	, MAX(CASE WHEN SHOPIDX = '27' THEN PDIDX END)			AS 'PDIDX27'
	, MAX(CASE WHEN SHOPIDX = '27' THEN SHOPIDX END)		AS 'SHOP27'	
	, MAX(CASE WHEN SHOPIDX = '27' THEN SHOPNM END)			AS 'SHOP27NM'
	, MAX(CASE WHEN SHOPIDX = '27' THEN DTLPAYAMT END)		AS 'SHOP27PRICE'	
	, MAX(CASE WHEN SHOPIDX = '27' THEN DTLPRODUCTLINK END)	AS 'SHOP27LINK'		
	, MAX(CASE WHEN SHOPIDX = '28' THEN PDIDX END)			AS 'PDIDX28'
	, MAX(CASE WHEN SHOPIDX = '28' THEN SHOPIDX END)		AS 'SHOP28'	
	, MAX(CASE WHEN SHOPIDX = '28' THEN SHOPNM END)			AS 'SHOP28NM'
	, MAX(CASE WHEN SHOPIDX = '28' THEN DTLPAYAMT END)		AS 'SHOP28PRICE'	
	, MAX(CASE WHEN SHOPIDX = '28' THEN DTLPRODUCTLINK END)	AS 'SHOP28LINK'		
	, MAX(CASE WHEN SHOPIDX = '29' THEN PDIDX END)			AS 'PDIDX29'
	, MAX(CASE WHEN SHOPIDX = '29' THEN SHOPIDX END)		AS 'SHOP29'	
	, MAX(CASE WHEN SHOPIDX = '29' THEN SHOPNM END)			AS 'SHOP29NM'
	, MAX(CASE WHEN SHOPIDX = '29' THEN DTLPAYAMT END)		AS 'SHOP29PRICE'	
	, MAX(CASE WHEN SHOPIDX = '29' THEN DTLPRODUCTLINK END)	AS 'SHOP29LINK'		
	, MAX(CASE WHEN SHOPIDX = '30' THEN PDIDX END)			AS 'PDIDX30'
	, MAX(CASE WHEN SHOPIDX = '30' THEN SHOPIDX END)		AS 'SHOP30'	
	, MAX(CASE WHEN SHOPIDX = '30' THEN SHOPNM END)			AS 'SHOP30NM'
	, MAX(CASE WHEN SHOPIDX = '30' THEN DTLPAYAMT END)		AS 'SHOP30PRICE'	
	, MAX(CASE WHEN SHOPIDX = '30' THEN DTLPRODUCTLINK END)	AS 'SHOP30LINK'		
	, MAX(CASE WHEN SHOPIDX = '31' THEN PDIDX END)			AS 'PDIDX31'
	, MAX(CASE WHEN SHOPIDX = '31' THEN SHOPIDX END)		AS 'SHOP31'	
	, MAX(CASE WHEN SHOPIDX = '31' THEN SHOPNM END)			AS 'SHOP31NM'
	, MAX(CASE WHEN SHOPIDX = '31' THEN DTLPAYAMT END)		AS 'SHOP31PRICE'	
	, MAX(CASE WHEN SHOPIDX = '31' THEN DTLPRODUCTLINK END)	AS 'SHOP31LINK'		
	, MAX(CASE WHEN SHOPIDX = '32' THEN PDIDX END)			AS 'PDIDX32'
	, MAX(CASE WHEN SHOPIDX = '32' THEN SHOPIDX END)		AS 'SHOP32'	
	, MAX(CASE WHEN SHOPIDX = '32' THEN SHOPNM END)			AS 'SHOP32NM'
	, MAX(CASE WHEN SHOPIDX = '32' THEN DTLPAYAMT END)		AS 'SHOP32PRICE'	
	, MAX(CASE WHEN SHOPIDX = '32' THEN DTLPRODUCTLINK END)	AS 'SHOP32LINK'		
	, MAX(CASE WHEN SHOPIDX = '33' THEN PDIDX END)			AS 'PDIDX33'
	, MAX(CASE WHEN SHOPIDX = '33' THEN SHOPIDX END)		AS 'SHOP33'	
	, MAX(CASE WHEN SHOPIDX = '33' THEN SHOPNM END)			AS 'SHOP33NM'
	, MAX(CASE WHEN SHOPIDX = '33' THEN DTLPAYAMT END)		AS 'SHOP33PRICE'	
	, MAX(CASE WHEN SHOPIDX = '33' THEN DTLPRODUCTLINK END)	AS 'SHOP33LINK'		
	, MAX(CASE WHEN SHOPIDX = '34' THEN PDIDX END)			AS 'PDIDX34'
	, MAX(CASE WHEN SHOPIDX = '34' THEN SHOPIDX END)		AS 'SHOP34'	
	, MAX(CASE WHEN SHOPIDX = '34' THEN SHOPNM END)			AS 'SHOP34NM'
	, MAX(CASE WHEN SHOPIDX = '34' THEN DTLPAYAMT END)		AS 'SHOP34PRICE'	
	, MAX(CASE WHEN SHOPIDX = '34' THEN DTLPRODUCTLINK END)	AS 'SHOP34LINK'		
	, MAX(CASE WHEN SHOPIDX = '35' THEN PDIDX END)			AS 'PDIDX35'
	, MAX(CASE WHEN SHOPIDX = '35' THEN SHOPIDX END)		AS 'SHOP35'	
	, MAX(CASE WHEN SHOPIDX = '35' THEN SHOPNM END)			AS 'SHOP35NM'
	, MAX(CASE WHEN SHOPIDX = '35' THEN DTLPAYAMT END)		AS 'SHOP35PRICE'	
	, MAX(CASE WHEN SHOPIDX = '35' THEN DTLPRODUCTLINK END)	AS 'SHOP35LINK'		
	, MAX(CASE WHEN SHOPIDX = '36' THEN PDIDX END)			AS 'PDIDX36'
	, MAX(CASE WHEN SHOPIDX = '36' THEN SHOPIDX END)		AS 'SHOP36'	
	, MAX(CASE WHEN SHOPIDX = '36' THEN SHOPNM END)			AS 'SHOP36NM'
	, MAX(CASE WHEN SHOPIDX = '36' THEN DTLPAYAMT END)		AS 'SHOP36PRICE'	
	, MAX(CASE WHEN SHOPIDX = '36' THEN DTLPRODUCTLINK END)	AS 'SHOP36LINK'		
	, MAX(CASE WHEN SHOPIDX = '37' THEN PDIDX END)			AS 'PDIDX37'
	, MAX(CASE WHEN SHOPIDX = '37' THEN SHOPIDX END)		AS 'SHOP37'	
	, MAX(CASE WHEN SHOPIDX = '37' THEN SHOPNM END)			AS 'SHOP37NM'
	, MAX(CASE WHEN SHOPIDX = '37' THEN DTLPAYAMT END)		AS 'SHOP37PRICE'	
	, MAX(CASE WHEN SHOPIDX = '37' THEN DTLPRODUCTLINK END)	AS 'SHOP37LINK'		
	, MAX(CASE WHEN SHOPIDX = '38' THEN PDIDX END)			AS 'PDIDX38'
	, MAX(CASE WHEN SHOPIDX = '38' THEN SHOPIDX END)		AS 'SHOP38'	
	, MAX(CASE WHEN SHOPIDX = '38' THEN SHOPNM END)			AS 'SHOP38NM'
	, MAX(CASE WHEN SHOPIDX = '38' THEN DTLPAYAMT END)		AS 'SHOP38PRICE'	
	, MAX(CASE WHEN SHOPIDX = '38' THEN DTLPRODUCTLINK END)	AS 'SHOP38LINK'		
	, MAX(CASE WHEN SHOPIDX = '39' THEN PDIDX END)			AS 'PDIDX39'
	, MAX(CASE WHEN SHOPIDX = '39' THEN SHOPIDX END)		AS 'SHOP39'	
	, MAX(CASE WHEN SHOPIDX = '39' THEN SHOPNM END)			AS 'SHOP39NM'
	, MAX(CASE WHEN SHOPIDX = '39' THEN DTLPAYAMT END)		AS 'SHOP39PRICE'	
	, MAX(CASE WHEN SHOPIDX = '39' THEN DTLPRODUCTLINK END)	AS 'SHOP39LINK'		
	, MAX(CASE WHEN SHOPIDX = '40' THEN PDIDX END)			AS 'PDIDX40'
	, MAX(CASE WHEN SHOPIDX = '40' THEN SHOPIDX END)		AS 'SHOP40'	
	, MAX(CASE WHEN SHOPIDX = '40' THEN SHOPNM END)			AS 'SHOP40NM'
	, MAX(CASE WHEN SHOPIDX = '40' THEN DTLPAYAMT END)		AS 'SHOP40PRICE'	
	, MAX(CASE WHEN SHOPIDX = '40' THEN DTLPRODUCTLINK END)	AS 'SHOP40LINK'		
	, MAX(CASE WHEN SHOPIDX = '41' THEN PDIDX END)			AS 'PDIDX41'
	, MAX(CASE WHEN SHOPIDX = '41' THEN SHOPIDX END)		AS 'SHOP41'	
	, MAX(CASE WHEN SHOPIDX = '41' THEN SHOPNM END)			AS 'SHOP41NM'
	, MAX(CASE WHEN SHOPIDX = '41' THEN DTLPAYAMT END)		AS 'SHOP41PRICE'	
	, MAX(CASE WHEN SHOPIDX = '41' THEN DTLPRODUCTLINK END)	AS 'SHOP41LINK'		
	, MAX(CASE WHEN SHOPIDX = '42' THEN PDIDX END)			AS 'PDIDX42'
	, MAX(CASE WHEN SHOPIDX = '42' THEN SHOPIDX END)		AS 'SHOP42'	
	, MAX(CASE WHEN SHOPIDX = '42' THEN SHOPNM END)			AS 'SHOP42NM'
	, MAX(CASE WHEN SHOPIDX = '42' THEN DTLPAYAMT END)		AS 'SHOP42PRICE'	
	, MAX(CASE WHEN SHOPIDX = '42' THEN DTLPRODUCTLINK END)	AS 'SHOP42LINK'		
	, MAX(CASE WHEN SHOPIDX = '43' THEN PDIDX END)			AS 'PDIDX43'
	, MAX(CASE WHEN SHOPIDX = '43' THEN SHOPIDX END)		AS 'SHOP43'	
	, MAX(CASE WHEN SHOPIDX = '43' THEN SHOPNM END)			AS 'SHOP43NM'
	, MAX(CASE WHEN SHOPIDX = '43' THEN DTLPAYAMT END)		AS 'SHOP43PRICE'	
	, MAX(CASE WHEN SHOPIDX = '43' THEN DTLPRODUCTLINK END)	AS 'SHOP43LINK'		
	, MAX(CASE WHEN SHOPIDX = '44' THEN PDIDX END)			AS 'PDIDX44'
	, MAX(CASE WHEN SHOPIDX = '44' THEN SHOPIDX END)		AS 'SHOP44'	
	, MAX(CASE WHEN SHOPIDX = '44' THEN SHOPNM END)			AS 'SHOP44NM'
	, MAX(CASE WHEN SHOPIDX = '44' THEN DTLPAYAMT END)		AS 'SHOP44PRICE'	
	, MAX(CASE WHEN SHOPIDX = '44' THEN DTLPRODUCTLINK END)	AS 'SHOP44LINK'		
	, MAX(CASE WHEN SHOPIDX = '45' THEN PDIDX END)			AS 'PDIDX45'
	, MAX(CASE WHEN SHOPIDX = '45' THEN SHOPIDX END)		AS 'SHOP45'	
	, MAX(CASE WHEN SHOPIDX = '45' THEN SHOPNM END)			AS 'SHOP45NM'
	, MAX(CASE WHEN SHOPIDX = '45' THEN DTLPAYAMT END)		AS 'SHOP45PRICE'	
	, MAX(CASE WHEN SHOPIDX = '45' THEN DTLPRODUCTLINK END)	AS 'SHOP45LINK'		
	, MAX(CASE WHEN SHOPIDX = '46' THEN PDIDX END)			AS 'PDIDX46'
	, MAX(CASE WHEN SHOPIDX = '46' THEN SHOPIDX END)		AS 'SHOP46'	
	, MAX(CASE WHEN SHOPIDX = '46' THEN SHOPNM END)			AS 'SHOP46NM'
	, MAX(CASE WHEN SHOPIDX = '46' THEN DTLPAYAMT END)		AS 'SHOP46PRICE'	
	, MAX(CASE WHEN SHOPIDX = '46' THEN DTLPRODUCTLINK END)	AS 'SHOP46LINK'		
	, MAX(CASE WHEN SHOPIDX = '47' THEN PDIDX END)			AS 'PDIDX47'
	, MAX(CASE WHEN SHOPIDX = '47' THEN SHOPIDX END)		AS 'SHOP47'	
	, MAX(CASE WHEN SHOPIDX = '47' THEN SHOPNM END)			AS 'SHOP47NM'
	, MAX(CASE WHEN SHOPIDX = '47' THEN DTLPAYAMT END)		AS 'SHOP47PRICE'	
	, MAX(CASE WHEN SHOPIDX = '47' THEN DTLPRODUCTLINK END)	AS 'SHOP47LINK'		
	, MAX(CASE WHEN SHOPIDX = '48' THEN PDIDX END)			AS 'PDIDX48'
	, MAX(CASE WHEN SHOPIDX = '48' THEN SHOPIDX END)		AS 'SHOP48'	
	, MAX(CASE WHEN SHOPIDX = '48' THEN SHOPNM END)			AS 'SHOP48NM'
	, MAX(CASE WHEN SHOPIDX = '48' THEN DTLPAYAMT END)		AS 'SHOP48PRICE'	
	, MAX(CASE WHEN SHOPIDX = '48' THEN DTLPRODUCTLINK END)	AS 'SHOP48LINK'		
	, MAX(CASE WHEN SHOPIDX = '49' THEN PDIDX END)			AS 'PDIDX49'
	, MAX(CASE WHEN SHOPIDX = '49' THEN SHOPIDX END)		AS 'SHOP49'	
	, MAX(CASE WHEN SHOPIDX = '49' THEN SHOPNM END)			AS 'SHOP49NM'
	, MAX(CASE WHEN SHOPIDX = '49' THEN DTLPAYAMT END)		AS 'SHOP49PRICE'	
	, MAX(CASE WHEN SHOPIDX = '49' THEN DTLPRODUCTLINK END)	AS 'SHOP49LINK'		
	, MAX(CASE WHEN SHOPIDX = '50' THEN PDIDX END)			AS 'PDIDX50'
	, MAX(CASE WHEN SHOPIDX = '50' THEN SHOPIDX END)		AS 'SHOP50'	
	, MAX(CASE WHEN SHOPIDX = '50' THEN SHOPNM END)			AS 'SHOP50NM'
	, MAX(CASE WHEN SHOPIDX = '50' THEN DTLPAYAMT END)		AS 'SHOP50PRICE'	
	, MAX(CASE WHEN SHOPIDX = '50' THEN DTLPRODUCTLINK END)	AS 'SHOP50LINK'		
FROM
(
	SELECT 
		pl.IDX 			AS PIDX
		, pl.PRODUCTNM 	AS PRODUCTNM
		, pdl.IDX 		AS PDIDX
		, pdl.SHOPIDX 	AS SHOPIDX
		, sl.SHOPNM		AS SHOPNM
		, pdl.DTLPAYAMT AS DTLPAYAMT
		, pdl.DTLPRODUCTLINK AS DTLPRODUCTLINK
	FROM product_lst pl
		LEFT OUTER JOIN product_dtl_lst pdl
		ON pl.IDX = pdl.PRODUCTIDX 
		LEFT OUTER JOIN shop_lst sl
		ON sl.idx = pdl.shopidx
	WHERE 1=1
) T
WHERE 1=1
GROUP BY 
	PIDX
	, PRODUCTNM
ORDER BY CAST(PIDX as UNSIGNED)
	</select>
	
	<select id="getCountProductDtlLst" parameterType="String" resultType="com.jyj.msg.controller.dto.ProductDtlExcelLstDto">
		SELECT
			pdl.IDX 				AS PDIDX
			, pdl.SHOPIDX 			AS SHOPIDX
			, sl.SHOPNM				AS SHOPNM
			, pdl.DTLPAYAMT 		AS DTLPAYAMT
			, pdl.DTLPRODUCTLINK 	AS DTLPRODUCTLINK
		FROM product_dtl_lst pdl
		LEFT OUTER JOIN shop_lst sl
		  ON sl.idx = pdl.shopidx
		WHERE pdl.PRODUCTIDX = {IDX}
	</select>
</mapper>